---
layout: post
title: Setting timeout on Axis WebService calls
date: 2010-12-17 11:02
author: isaaclevin
comments: true
categories: [axis, axistools-maven-plugin, Java, timeout, wsdl2java]
---
In several projects we participated, there was a need to call external Web Services using Java classes generated by wsdl2java Axis tool (or wsdl2java goal of axistools-maven-plugin).

Sometimes these external systems that exposed Web Services experienced high load, slow database and other factors, which caused our calls to them to take outrageously long time before the response have been received.
So, we had to introduce timeouts and handle such calls as errors.

Looking into <a href="http://ws.apache.org/axis/java/reference.html#WSDL2JavaReference">Axis documentation</a> we found that there is a wsdl2java "timeout" parameter available in both command line tool and via maven plugin. However setting this parameter had no effect, our calls were still hanging indefinitely.  It's not even clear from the documentation if this timeout is applied to webservice call or to execution of wsdl2java itself.

Anyways to have a timeout on webservice call the one must be set on instance of <a href="http://ws.apache.org/axis/java/apiDocs/org/apache/axis/client/Call.html">org.apache.axis.client.Call</a> prior to calling invoke(). But creation of Call instance and setting of all its properties is done from Axis generated code and all your changes there will be overwritten on next wsdl2java run.

The solution is to set timeout property on the class that extends <strong>org.apache.axis.client.Stub</strong>, it's Axis generated class and would be called something like MyWebServicePort_PortType. If timeout on Call is not set it uses the value from Stub.
This solution is also much more flexible, because now you can set different timeouts on various calls depending on your business logic.
